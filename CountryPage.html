<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Paul's Maps & Stats</title>
		<link rel="icon" type="image/x-icon" href="https://cdn-icons-png.flaticon.com/512/183/183762.png">
		<script type="module">
			import {
				FilterUpdateType,
				TableauEventType
			} from "https://public.tableau.com/javascripts/api/tableau.embedding.3.latest.js";
			async function countryFilter(country) {
				let viz = document.getElementById("tableauViz");
				let sheet = viz.workbook.activeSheet;
				if (country) {
					await sheet.applyFilterAsync("Country Name", [country], FilterUpdateType.Replace);
				} else {
					await sheet.clearFilterAsync("Country Name");
				}
				let viz2 = document.getElementById("tableauViz2");
				let sheet2 = viz2.workbook.activeSheet;
				if (country) {
					await sheet2.applyFilterAsync("Country Name", ["Sudan"], FilterUpdateType.Replace);
				} else {
					await sheet2.clearFilterAsync("Country Name");
				}
			}
			const dropdown = document.getElementById("changeCountry");
			dropdown.addEventListener("change", (e) => countryFilter(e.target.value));
		</script>
	</head>
	<body style="width:100%; height:700px;overflow:auto;">
		<a href="https://shanaka00jayalath.github.io/hello-world/">Home</a>
		<a href="https://shanaka00jayalath.github.io/hello-world/Age distribution.html">Age distribution</a>
		<a href="https://shanaka00jayalath.github.io/hello-world/Urban v Rural.html">Urban v Rural</a>
		<a href="https://shanaka00jayalath.github.io/hello-world/CountryPage.html">Country page</a> 
		<div style="padding:20px;">
			Year: <select id="changeCountry">
				<option value="">All</option>
				<option value="Sri Lanka">Sri Lanka</option>
				<option value="2014">2014</option>
			</select>
		</div>
		<div>
			<tableau-viz id="tableauViz" src="https://public.tableau.com/views/khfcgjfx_hdbcj_chehcb/Countrywidget" hide-tabs>
			</tableau-viz>
			<tableau-viz id="tableauViz2" src="https://public.tableau.com/views/khfcgjfx_hdbcj_chehcb/Countrywidget" hide-tabs>
			</tableau-viz>
		</div>

	</body>
</html>
